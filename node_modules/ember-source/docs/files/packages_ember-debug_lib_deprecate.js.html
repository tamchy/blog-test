<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>packages/ember-debug/lib/deprecate.js - The Ember API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="The Ember API" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: v2.11.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Backburner.html">Backburner</a></li>
                                <li><a href="../classes/BucketCache.html">BucketCache</a></li>
                                <li><a href="../classes/Container.html">Container</a></li>
                                <li><a href="../classes/ContainerProxyMixin.html">ContainerProxyMixin</a></li>
                                <li><a href="../classes/Descriptor.html">Descriptor</a></li>
                                <li><a href="../classes/Ember.html">Ember</a></li>
                                <li><a href="../classes/Ember.ActionHandler.html">Ember.ActionHandler</a></li>
                                <li><a href="../classes/Ember.ActionSupport.html">Ember.ActionSupport</a></li>
                                <li><a href="../classes/Ember.Application.html">Ember.Application</a></li>
                                <li><a href="../classes/Ember.ApplicationInstance.html">Ember.ApplicationInstance</a></li>
                                <li><a href="../classes/Ember.ApplicationInstance.BootOptions.html">Ember.ApplicationInstance.BootOptions</a></li>
                                <li><a href="../classes/Ember.Array.html">Ember.Array</a></li>
                                <li><a href="../classes/Ember.ArrayProxy.html">Ember.ArrayProxy</a></li>
                                <li><a href="../classes/Ember.AutoLocation.html">Ember.AutoLocation</a></li>
                                <li><a href="../classes/Ember.Binding.html">Ember.Binding</a></li>
                                <li><a href="../classes/Ember.Checkbox.html">Ember.Checkbox</a></li>
                                <li><a href="../classes/Ember.ClassNamesSupport.html">Ember.ClassNamesSupport</a></li>
                                <li><a href="../classes/Ember.Comparable.html">Ember.Comparable</a></li>
                                <li><a href="../classes/Ember.Component.html">Ember.Component</a></li>
                                <li><a href="../classes/Ember.computed.html">Ember.computed</a></li>
                                <li><a href="../classes/Ember.ComputedProperty.html">Ember.ComputedProperty</a></li>
                                <li><a href="../classes/Ember.ContainerDebugAdapter.html">Ember.ContainerDebugAdapter</a></li>
                                <li><a href="../classes/Ember.Controller.html">Ember.Controller</a></li>
                                <li><a href="../classes/Ember.ControllerMixin.html">Ember.ControllerMixin</a></li>
                                <li><a href="../classes/Ember.Copyable.html">Ember.Copyable</a></li>
                                <li><a href="../classes/Ember.CoreObject.html">Ember.CoreObject</a></li>
                                <li><a href="../classes/Ember.CoreView.html">Ember.CoreView</a></li>
                                <li><a href="../classes/Ember.DataAdapter.html">Ember.DataAdapter</a></li>
                                <li><a href="../classes/Ember.Debug.html">Ember.Debug</a></li>
                                <li><a href="../classes/Ember.DefaultResolver.html">Ember.DefaultResolver</a></li>
                                <li><a href="../classes/Ember.EachProxy.html">Ember.EachProxy</a></li>
                                <li><a href="../classes/Ember.Engine.html">Ember.Engine</a></li>
                                <li><a href="../classes/Ember.EngineInstance.html">Ember.EngineInstance</a></li>
                                <li><a href="../classes/Ember.Enumerable.html">Ember.Enumerable</a></li>
                                <li><a href="../classes/Ember.Error.html">Ember.Error</a></li>
                                <li><a href="../classes/Ember.EventDispatcher.html">Ember.EventDispatcher</a></li>
                                <li><a href="../classes/Ember.Evented.html">Ember.Evented</a></li>
                                <li><a href="../classes/Ember.FEATURES.html">Ember.FEATURES</a></li>
                                <li><a href="../classes/Ember.Freezable.html">Ember.Freezable</a></li>
                                <li><a href="../classes/Ember.HashLocation.html">Ember.HashLocation</a></li>
                                <li><a href="../classes/Ember.Helper.html">Ember.Helper</a></li>
                                <li><a href="../classes/Ember.HistoryLocation.html">Ember.HistoryLocation</a></li>
                                <li><a href="../classes/Ember.HTMLBars.html">Ember.HTMLBars</a></li>
                                <li><a href="../classes/Ember.inject.html">Ember.inject</a></li>
                                <li><a href="../classes/Ember.InjectedProperty.html">Ember.InjectedProperty</a></li>
                                <li><a href="../classes/Ember.Instrumentation.html">Ember.Instrumentation</a></li>
                                <li><a href="../classes/Ember.LinkComponent.html">Ember.LinkComponent</a></li>
                                <li><a href="../classes/Ember.Location.html">Ember.Location</a></li>
                                <li><a href="../classes/Ember.Map.html">Ember.Map</a></li>
                                <li><a href="../classes/Ember.MapWithDefault.html">Ember.MapWithDefault</a></li>
                                <li><a href="../classes/Ember.Mixin.html">Ember.Mixin</a></li>
                                <li><a href="../classes/Ember.MutableArray.html">Ember.MutableArray</a></li>
                                <li><a href="../classes/Ember.MutableEnumerable.html">Ember.MutableEnumerable</a></li>
                                <li><a href="../classes/Ember.Namespace.html">Ember.Namespace</a></li>
                                <li><a href="../classes/Ember.NativeArray.html">Ember.NativeArray</a></li>
                                <li><a href="../classes/Ember.NoneLocation.html">Ember.NoneLocation</a></li>
                                <li><a href="../classes/Ember.Object.html">Ember.Object</a></li>
                                <li><a href="../classes/Ember.ObjectProxy.html">Ember.ObjectProxy</a></li>
                                <li><a href="../classes/Ember.Observable.html">Ember.Observable</a></li>
                                <li><a href="../classes/Ember.OrderedSet.html">Ember.OrderedSet</a></li>
                                <li><a href="../classes/Ember.PromiseProxyMixin.html">Ember.PromiseProxyMixin</a></li>
                                <li><a href="../classes/Ember.ProxyMixin.html">Ember.ProxyMixin</a></li>
                                <li><a href="../classes/Ember.Route.html">Ember.Route</a></li>
                                <li><a href="../classes/Ember.Router.html">Ember.Router</a></li>
                                <li><a href="../classes/Ember.run.html">Ember.run</a></li>
                                <li><a href="../classes/Ember.Service.html">Ember.Service</a></li>
                                <li><a href="../classes/Ember.String.html">Ember.String</a></li>
                                <li><a href="../classes/Ember.TargetActionSupport.html">Ember.TargetActionSupport</a></li>
                                <li><a href="../classes/Ember.Templates.helpers.html">Ember.Templates.helpers</a></li>
                                <li><a href="../classes/Ember.Test.html">Ember.Test</a></li>
                                <li><a href="../classes/Ember.Test.Adapter.html">Ember.Test.Adapter</a></li>
                                <li><a href="../classes/Ember.Test.QUnitAdapter.html">Ember.Test.QUnitAdapter</a></li>
                                <li><a href="../classes/Ember.TextArea.html">Ember.TextArea</a></li>
                                <li><a href="../classes/Ember.TextField.html">Ember.TextField</a></li>
                                <li><a href="../classes/Ember.TextSupport.html">Ember.TextSupport</a></li>
                                <li><a href="../classes/Ember.View.html">Ember.View</a></li>
                                <li><a href="../classes/Ember.ViewMixin.html">Ember.ViewMixin</a></li>
                                <li><a href="../classes/Function.html">Function</a></li>
                                <li><a href="../classes/Libraries.html">Libraries</a></li>
                                <li><a href="../classes/Registry.html">Registry</a></li>
                                <li><a href="../classes/RegistryProxyMixin.html">RegistryProxyMixin</a></li>
                                <li><a href="../classes/RoutingService.html">RoutingService</a></li>
                                <li><a href="../classes/String.html">String</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/ember.html">ember</a></li>
                                <li><a href="../modules/ember-application.html">ember-application</a></li>
                                <li><a href="../modules/ember-debug.html">ember-debug</a></li>
                                <li><a href="../modules/ember-extension-support.html">ember-extension-support</a></li>
                                <li><a href="../modules/ember-glimmer.html">ember-glimmer</a></li>
                                <li><a href="../modules/ember-htmlbars.html">ember-htmlbars</a></li>
                                <li><a href="../modules/ember-metal.html">ember-metal</a></li>
                                <li><a href="../modules/ember-routing.html">ember-routing</a></li>
                                <li><a href="../modules/ember-runtime.html">ember-runtime</a></li>
                                <li><a href="../modules/ember-testing.html">ember-testing</a></li>
                                <li><a href="../modules/ember-views.html">ember-views</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: packages/ember-debug/lib/deprecate.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*global __fail__*/

import { Error as EmberError } from &#x27;ember-metal&#x27;;
import Logger from &#x27;ember-console&#x27;;

import { ENV } from &#x27;ember-environment&#x27;;

import { registerHandler as genericRegisterHandler, invoke } from &#x27;./handlers&#x27;;

export function registerHandler(handler) {
  genericRegisterHandler(&#x27;deprecate&#x27;, handler);
}

function formatMessage(_message, options) {
  let message = _message;

  if (options &amp;&amp; options.id) {
    message = message + &#x60; [deprecation id: ${options.id}]&#x60;;
  }

  if (options &amp;&amp; options.url) {
    message += &#x27; See &#x27; + options.url + &#x27; for more details.&#x27;;
  }

  return message;
}

registerHandler(function logDeprecationToConsole(message, options) {
  let updatedMessage = formatMessage(message, options);

  Logger.warn(&#x27;DEPRECATION: &#x27; + updatedMessage);
});

let captureErrorForStack;

if (new Error().stack) {
  captureErrorForStack = function() {
    return new Error();
  };
} else {
  captureErrorForStack = function() {
    try { __fail__.fail(); } catch (e) { return e; }
  };
}

registerHandler(function logDeprecationStackTrace(message, options, next) {
  if (ENV.LOG_STACKTRACE_ON_DEPRECATION) {
    let stackStr = &#x27;&#x27;;
    let error = captureErrorForStack();
    let stack;

    if (error.stack) {
      if (error[&#x27;arguments&#x27;]) {
        // Chrome
        stack = error.stack.replace(/^\s+at\s+/gm, &#x27;&#x27;).
          replace(/^([^\(]+?)([\n$])/gm, &#x27;{anonymous}($1)$2&#x27;).
          replace(/^Object.&lt;anonymous&gt;\s*\(([^\)]+)\)/gm, &#x27;{anonymous}($1)&#x27;).split(&#x27;\n&#x27;);
        stack.shift();
      } else {
        // Firefox
        stack = error.stack.replace(/(?:\n@:0)?\s+$/m, &#x27;&#x27;).
          replace(/^\(/gm, &#x27;{anonymous}(&#x27;).split(&#x27;\n&#x27;);
      }

      stackStr = &#x27;\n    &#x27; + stack.slice(2).join(&#x27;\n    &#x27;);
    }

    let updatedMessage = formatMessage(message, options);

    Logger.warn(&#x27;DEPRECATION: &#x27; + updatedMessage + stackStr);
  } else {
    next(...arguments);
  }
});

registerHandler(function raiseOnDeprecation(message, options, next) {
  if (ENV.RAISE_ON_DEPRECATION) {
    let updatedMessage = formatMessage(message);

    throw new EmberError(updatedMessage);
  } else {
    next(...arguments);
  }
});

export let missingOptionsDeprecation = &#x27;When calling &#x60;Ember.deprecate&#x60; you &#x27; +
  &#x27;must provide an &#x60;options&#x60; hash as the third parameter.  &#x27; +
  &#x27;&#x60;options&#x60; should include &#x60;id&#x60; and &#x60;until&#x60; properties.&#x27;;
export let missingOptionsIdDeprecation = &#x27;When calling &#x60;Ember.deprecate&#x60; you must provide &#x60;id&#x60; in options.&#x27;;
export let missingOptionsUntilDeprecation = &#x27;When calling &#x60;Ember.deprecate&#x60; you must provide &#x60;until&#x60; in options.&#x27;;

/**
@module ember
@submodule ember-debug
*/

/**
  Display a deprecation warning with the provided message and a stack trace
  (Chrome and Firefox only).

  * In a production build, this method is defined as an empty function (NOP).
  Uses of this method in Ember itself are stripped from the ember.prod.js build.

  @method deprecate
  @param {String} message A description of the deprecation.
  @param {Boolean} test A boolean. If falsy, the deprecation will be displayed.
  @param {Object} options
  @param {String} options.id A unique id for this deprecation. The id can be
    used by Ember debugging tools to change the behavior (raise, log or silence)
    for that specific deprecation. The id should be namespaced by dots, e.g.
    &quot;view.helper.select&quot;.
  @param {string} options.until The version of Ember when this deprecation
    warning will be removed.
  @param {String} [options.url] An optional url to the transition guide on the
    emberjs.com website.
  @for Ember
  @public
  @since 1.0.0
*/
export default function deprecate(message, test, options) {
  if (!options || (!options.id &amp;&amp; !options.until)) {
    deprecate(
      missingOptionsDeprecation,
      false,
      {
        id: &#x27;ember-debug.deprecate-options-missing&#x27;,
        until: &#x27;3.0.0&#x27;,
        url: &#x27;http://emberjs.com/deprecations/v2.x/#toc_ember-debug-function-options&#x27;
      }
    );
  }

  if (options &amp;&amp; !options.id) {
    deprecate(
      missingOptionsIdDeprecation,
      false,
      {
        id: &#x27;ember-debug.deprecate-id-missing&#x27;,
        until: &#x27;3.0.0&#x27;,
        url: &#x27;http://emberjs.com/deprecations/v2.x/#toc_ember-debug-function-options&#x27;
      }
    );
  }

  if (options &amp;&amp; !options.until) {
    deprecate(
      missingOptionsUntilDeprecation,
      options &amp;&amp; options.until,
      {
        id: &#x27;ember-debug.deprecate-until-missing&#x27;,
        until: &#x27;3.0.0&#x27;,
        url: &#x27;http://emberjs.com/deprecations/v2.x/#toc_ember-debug-function-options&#x27;
      }
    );
  }

  invoke(&#x27;deprecate&#x27;, ...arguments);
}

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
